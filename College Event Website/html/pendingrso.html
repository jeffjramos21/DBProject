<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>College Event Website | Pending RSO</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="../images/favicon1.ico" rel="icon">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Roboto:100,300,400,500,700|Philosopher:400,400i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="../vendor/modal-video/css/modal-video.min.css" rel="stylesheet">
  <link href="../vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="../vendor/aos/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <!-- CSS File -->
  <link href="../css/style.css" rel="stylesheet">
</head>

<body onload="javascript:getPendingRSO()">
  <!-- Side Bar-->
  <div id="mySidenav" class="sidenav">
    <div id="logo">
      <a href="../index.html"><img src="../images/logo.png" alt="" title="" /></a>
    </div>
    <a href="superadmin.html">Dashboard</a>
    <a href="createuni.html">Create University Profile</a>
    <a href="pendingevent.html">Check Pending Events</a>
    <div id="sidebar-active"><a href="pendingrso.html">Check Pending RSO Requests</a></div>
    <a href="universityList.html">View University Profiles</a>
    <a href="checkevents.html">Check Current Events</a>
    <a href="../index.html" onclick="localStorage.clear()">Log Out</a>
  </div>
  <!-- End Side Bar-->

  <!-- ======= Super Admin - Pending RSO Section ======= -->
  <section id="pendingevent" class="padd-section">

    <div class="container">
      <div id="createsuccess"></div>
      <div class="section-title text-center">
        <h2>Pending RSO Requests</h2>
      </div>

      <div class="row">

        <div id="accordion">
          <!-- Pending RSO Requests will be shown here -->
        </div>
      </div>
    </div>
  </section>
  <!-- ======= End Pending RSO Section ======= -->

  <!-- Vendor JS Files -->
  <script src="../vendor/jquery/jquery.min.js"></script>
  <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="../vendor/php-email-form/validate.js"></script>
  <script src="../vendor/modal-video/js/modal-video.min.js"></script>
  <script src="../vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="../vendor/superfish/superfish.min.js"></script>
  <script src="../vendor/hoverIntent/hoverIntent.js"></script>
  <script src="../vendor/aos/aos.js"></script>

  <!-- Bootstrap JS Files-->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

  <!-- JS File -->
  <script src="../javascript/main.js"></script>

  <!-- DATA JAVASCRIPT-->
  <script>
    var userID = 1;
    jcontent4 = {
      "PendingRSOid": [0,1],
      "University": ["University of Central Florida", "University of Central Florida"],
      "RSOName": ["American Concrete Institute", "Car Club"],
      "Admin": ["adminamerican@knights.ucf.edu","admincar@knights.ucf.edu"],
      "email2": ["email2american@knights.ucf.edu","email2car@knights.ucf.edu"],
      "email3": ["email3american@knights.ucf.edu","email3car@knights.ucf.edu"],
      "email4": ["email4american@knights.ucf.edu","email4car@knights.ucf.edu"],
      "email5": ["email5american@knights.ucf.edu","email5car@knights.ucf.edu"],
      "Description": ["The ACI student chapter at UCF (ACI-UCF) is a pre-professional organization to promote concrete-based technologies in materials, design, construction and management.",
      "Car Club at UCF strives to provide an opportunity for automotive enthusiasts of all types to come together and discuss their passion for cars!"]
    }

    for (var i = 0; i < jcontent4.RSOName.length; i++) {
      var pending = document.createElement('div');
      pending.id = "accordion";
      document.getElementById('accordion').appendChild(pending)
      pending.innerHTML = '<div class="card"><div class="card-header"><h5 class="mb-0">' +
        jcontent4.RSOName[i] + '</h5></div><div data-parent="#accordion"><div class="card-body"><b>University Name: </b>' + jcontent4.University[i] +
        '<br /><b>Admin Email: </b>' + jcontent4.Admin[i] + '<br /><b>Contact Email #2: </b>' + jcontent4.email2[i] + '<br /><b>Contact Email #3: </b>' 
        + jcontent4.email3[i] + '<br /><b>Contact Email #4: </b>' + jcontent4.email4[i] + '<br /><b>Contact Email #5: </b>' + jcontent4.email5[i] + '<br /><b>RSO Description: </b>' + jcontent4.Description[i] +
        '<div class="decisionbuttons"><button class="btnapprove" onclick="Approve(\'' + jcontent4.PendingRSOid[i] + '\')">Approve</button><button class="btndeny", onclick="Deny(\'' + jcontent4.PendingRSOid[i] + '\')">Deny</button></div></div></div></div>'
    }

    function getPendingRSO() {
      var pendingRSO = {"userID": userID}
            var jsonSend = JSON.stringify(pendingRSO);
            console.log('JSON SENDING:' + jsonSend);

            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost/collegewebsite/api/getPendingRSO.php', true);
            xhr.setRequestHeader("Content-Type", "application/json");

            xhr.onreadystatechange = function () {
              if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                  console.log(this.response);
                  console.log(this.responseText);
                }
              }
            };

            xhr.send(jsonSend);  
    }

    function Approve(pendingID) {
      var approveRSO = {"userID": userID, "pendingRSOid": pendingID}
            var jsonSend = JSON.stringify(approveRSO);
            console.log('JSON SENDING:' + jsonSend);

            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost/collegewebsite/api/approveRSO.php', true);
            xhr.setRequestHeader("Content-Type", "application/json");

            xhr.onreadystatechange = function () {
              if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                  console.log(this.response);
                  console.log(this.responseText);
                  var created = document.getElementById("createsuccess");
                created.innerHTML = '<div class="alert alert-success alert-dismissible fade show" role="alert">RSO approved! Refresh page to see new changes.' +
                  '<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>';
                }
              }
            };

            xhr.send(jsonSend);  
    }

    function Deny(pendingID) {
      var denyRSO = {"userID": userID, "pendingRSOid": pendingID}
            var jsonSend = JSON.stringify(denyRSO);
            console.log('JSON SENDING:' + jsonSend);

            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost/collegewebsite/api/denyRSO.php', true);
            xhr.setRequestHeader("Content-Type", "application/json");

            xhr.onreadystatechange = function () {
              if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                  console.log(this.response);
                  console.log(this.responseText);
                  var created = document.getElementById("createsuccess");
                created.innerHTML = '<div class="alert alert-danger alert-dismissible fade show" role="alert">RSO denied! Refresh page to see new changes.' +
                  '<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>';
                }
              }
            };

            xhr.send(jsonSend);  
    }

  </script>
  <!-- End DATA JAVASCRIPT-->

</body>

</html>